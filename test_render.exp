#!/usr/bin/expect -f
set timeout 3
spawn env KITTY_WINDOW_ID=1 DYLD_LIBRARY_PATH=./lib ./target/release/chonker8-hot /tmp/test_simple.pdf
expect {
    "DEBUG] Rendering screen" { puts "Found render call"; exp_continue }
    "DEBUG] render_pdf_screen" { puts "Found PDF screen render"; exp_continue }
    "DEBUG] About to render PDF content" { puts "Found PDF content render"; exp_continue }
    "DEBUG] PDF image size" { puts "Found image size"; exp_continue }
    "Error: Device not configured" { puts "Device error occurred" }
    timeout { puts "Timeout reached" }
}
send "q"
expect eof
